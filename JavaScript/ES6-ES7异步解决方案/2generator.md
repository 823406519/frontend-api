## 生成器原理
1. 生成器的内部状态
  - 挂起开始(Suspended start) 生成器创建时，代码还没有执行的状态
  - 执行(Executing) 当迭代器调用 next 方法，进入这个状态
  - 挂起让渡(Suspend yield) 当遇到 yeild，返回一个对象，随后挂起
  - 完成(Completed) 遇到 return 或者代码执行结束

2. 生成器与执行上下文
  - 当生成器被构造时，它返回一个迭代器，通过引用这个迭代器，来控制生成器的执行，只要这个迭代器一直存在，生成器的环境就会一直存在
  - 当使用迭代器的 next 方法，不会像平时函数一样创建一个 next 的执行环境，而是会把生成器的环境重新放进执行栈的顶部
  - 遇到 yield 后产生一个值返回就从栈中弹出，生成器会挂起让渡
  - 下一次迭代器 next 方法会从上次离开的位置继续执行

## 创建生成器函数

```js
function *fun(){
  // ...
  yield ...
  //...
}
```

## 调用生成器函数
1. 调用生成器函数返回一个迭代器(iterator)
2. 使用迭代器对象的 next 方法可以向生成器请求一个值，遇到 yeild 关键字，并返回生成的中间对象
   - 对象包含了 value 属性，即 yield 生成的中间结果
   - 包含了 done 属性
3. 每当返回一个值的时候，生成器就会异步挂起，等待下一次请求
4. 再次调用 next 时，将生成器从挂起状态唤醒，从上次执行等待的位置继续开始，直到遇到 yield 关键字，并返回生成的中间对象


