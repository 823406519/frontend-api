
## XMLHttpRequest2级规范
1. FormData
2. 超时设定
3. overrideMimeType
4. onload 事件
5. onpropress 事件

## FormData
```js
/* === FormData 
XMLHttpRequest 2级为此定义了FormData，FormData为创建以表单格式相同的数据用于XHR传输提供了便利
*/
let data = new FormData(); // 创建FormData实例
/*
formDataInstance.append(key, value) 增加数据
  key: 对应表单字段中的名称
  value：对应表单字段中的值
*/
data.append('name', 'liu');

// === Form data 还接受表单元素作为参数
let data = new FormData(document.form[0]);

// === 创建 FormData 后就可以将它使用send方法发送
xhr.send(data)
```

## 超时设定
```js
/*
XMLHttpRequest 2级规范新增了超时设定

注意，假如超时之后，可能readState已经变为4了，意味着调用会调用onreadystatechange事件处理程序，
但是超时了之后，再访问status属性，会导致错误，所以在判断status可以封装在一个try... catch 语句中
*/
xhr.timeout = 1000; // 设置超时未1s
xhr.ontimeout = function(){
  // 超时处理
}
```

## overrideMimeType
```js
/* === overrideMimeType 方法用于重写XHR响应的MIME类型*/
xhr.overrideMimeType("text/html");


```


## onload
```js
/* === 为了简化XHR异步交互模型，引入load事件，替代readystatechange事件 */
xhr.onload = function(){
  if ((xhr.status >= 200 && xhr.status<300)|| xhr.status==304){
      // 返回结果
      console.log(xhr.responseText);
    } else {
      // 返回错误信息
      console.error(xhr.statusText);
  }
}

```

## onprogress
```js
/* === 引入progress事件
在浏览器接收新数据期间周期性触发， 该事件处理程序的接收一个event对象，
其target属性是XHR对象，还包含了以下三个属性：
1. lengthComputable 表示进度信息是否可用的boolean值
2. posiiton 表示已经接收到的字节数
3. totalSize 表示根据Content-length 响应头确定的预期的字节数
*/
xhr.onprogress = function(event){
  if(event.lengthComputable){
    console.log(event.position/event.totalSize);
  }
}
```