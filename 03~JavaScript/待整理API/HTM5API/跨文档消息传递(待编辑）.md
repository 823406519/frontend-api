
## 跨文档消息传送
跨文档消息传递（cross document message), 简称为XDM，指在不同域的页面间传递消息。

```js
/*
XDM的核心方法是postmessage()

postMessage(message, origin)
    message 是传递的消息，origin表示接受方来自的域
*/


// === 接受XDM消息，会触发window对象的message事件，这是一个异步事件
document.addEventHandler('message', function(event){
    /*
    onmessage 事件具有三个参数：
    1. data: postMessage 方法的第一个参数，消息字符串
    2. origin：发送消息所在的域
    3. source： 发送消息的window对象代理。常用语调用postMessage方法发送回执信息
    
    event.source 知识window对象的代理，而不真正的window对象
    */
    if(event.origin == 'http://www.example.com'){
        console.log(event.data);
        // 向来源窗口发送回执
        event.source.postMessage('received', 'http://www.example2.com');
    }
})

```