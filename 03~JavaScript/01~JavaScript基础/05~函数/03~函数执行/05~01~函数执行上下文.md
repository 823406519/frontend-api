## 执行上下文
执行上下文：JavaScript执行环境的抽象概念，JavaScript代码在执行上下文中被执行时产生。分为全局执行上下文和函数执行上下文
1. 全局执行上下文，任何不在函数内部的代码都在全局上下文中。javascript程序执行时已经创建全局执行上下文
2. 函数执行上下文，函数被调用时, 都会为该函数创建一个新的上下文

> 无论何时创建函数，都会创建一个与之关联的词法作用域，存储在内部属性`[[environment]`上。

## 创建执行上下文的过程
代码执行前，执行上下文需要完成以下工作：
* this 绑定
* 创建词法环境。词法环境是标识符-变量的映射结构。词法环境内部有两个内部组件：环境记录器。用于记录变量和函数声明的实际位置；外部环境的引用，用于访问外部环境。
* 创建变量环境。变量环境也是一个词法环境。词法环境组件和变量环境的一个不同就是前者被用来存储函数声明和变量（let 和 const）绑定，而后者只用来存储 var 变量绑定。这也是var变量提升的原因

## 创建执行上下文过程伪代码
```js
// 全局执行上下文绑定
GlobalExectionContext = {
  ThisBinding: globalObject, // 绑定为全局对象
  // 创建词法环境
  LexicalEnvironment: {
    EnvironmentRecord: {
      Type: 'Object'
      // 在这里绑定标识符
      // let const 变量，未被初始化
      // 函数
    },
    outer: null
  },

  VariableEnvironment: {
    EnvironmentRecord: {
      Type: 'Object'
      // 在这里绑定var 变量标识符，初始化为undefined
    },
    outer: null
  }
}

// 函数执行上下文
FunctionExectionContext = {
  ThisBinding: object, // 绑定this对象

  // 创建词法环境
  LexicalEnvironment: {
    EnvironmentRecord: {
      Type: 'Declarative'
      // 在这里绑定标识符
      // let const 变量，未被初始化
      // 函数
    },
    outer: OuterLexicalEnvironment
  },

  VariableEnvironment: {
    EnvironmentRecord: {
      Type: 'Declarative'
      // 在这里绑定var 变量标识符，初始化为undefined
    },

    outer: OuterLexicalEnvironment
  }
}

```

