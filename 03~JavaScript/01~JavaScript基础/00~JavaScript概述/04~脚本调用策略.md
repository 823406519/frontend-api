
## 脚本调用策略
HTML 元素是按其在页面中出现的次序调用的，如果用 JavaScript 来管理页面上的元素,若 JavaScript 在操作的 HTML 元素之前加载，则代码将出错。

## DOMContentLoaded
```js
// 可以使用 监听浏览器的 "DOMContentLoaded" 事件，即 HTML 文档体加载、解释完毕事件 避免出错
document.addEventListener("DOMContentLoaded", function() {
  // ...
});
```

## 异步脚本
把脚本元素放在文档体的底端,这样脚本就可以在 HTML 解析完毕后加载了, 此方案以及上述的 DOMContentLoaded 方案的问题是：只有在所有 HTML DOM 加载完成后才开始脚本的加载/解析过程。对于有大量 JavaScript 代码的大型网站，可能会带来显著的性能损耗。这也是 async 属性诞生的初衷.
```js
// 异步，告知浏览器在遇到 <script> 元素时不要中断后续 HTML 内容的加载
// async 只能用于外部脚本
<script src="script.js" async></script>
```

## async 和 defer
* async 特性指示异步执行脚本，从而使得脚本不会阻塞页面渲染。但脚本的运行次序就无法控制。当页面的脚本之间彼此独立，且不依赖于本页面的其它任何脚本时，async 是最理想的选择
* defer 特性通知浏览器该脚本将在文档完成解析后，触发 DOMContentLoaded 事件前执行。 defer 属性的脚本将按照在页面中出现的顺序加载

```js
<script defer src="js/vendor/jquery.js"></script>
<script defer src="js/script.js"></script>
```

总结：
* 如果脚本无需等待页面解析，且无依赖独立运行，那么应使用 async
* 如果脚本需要等待解析，且依赖于其它脚本，调用这些脚本时应使用 defer