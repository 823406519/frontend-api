
## HTML5 事件


## contextmenu 事件
contextmenu 这个事件，用以表示何时应该显示上下文菜单

由于 contextmenu 事件是冒泡的，因此可以为 document 指定一个事件处理程序，用以处理页面中发生的所有此类事件。


在所有浏览器中都可以取消这个事件：
1. 在兼容 DOM 的浏览器中，使用 event.preventDefalut()；
2. 在 IE 中，将 event.returnValue 的值设置为 false。

## beforeunload 事件
这个事件会在浏览器卸载页面之前触发，可以通过它来取消卸载并继续使用原有页面。为了显示这个弹出对话框，必须将 event.returnValue 的值设置为要显示给用户的字符串（对IE 及 Fiefox 而言），同时作为函数的值返回（对 Safari 和 Chrome 而言）


## DOMContentLoaded 事件
window 的 load 事件会在页面中的一切都加载完毕时触发，但这个过程可能会因为要加载的外部资源过多而颇费周折。而 DOMContentLoaded 事件则在形成完整的 DOM 树之后就会触发，不理会图像、JavaScript 文件、CSS 文件或其他资源是否已经下载完毕。

要处理 DOMContentLoaded 事件，可以为 document 或 window 添加相应的事件处理程序（尽管这个事件会冒泡到 window，但它的目标实际上是 document）。

## readystatechange 事件
IE 为 DOM 文档中的某些部分提供了 readystatechange 事件。支持 readystatechange 事件的每个对象都有一个 readyState 属性，可能包含下列 5 个值中的一个:
1. uninitialized（未初始化）：对象存在但尚未初始化
2. loading（正在加载）：对象正在加载数据
3. loaded（加载完毕）：对象加载数据完成
4. interactive（交互）：可以操作对象了，但还没有完全加载
5. complete（完成）：对象已经加载完毕

对于 document 而言，值为"interactive"的 readyState 会在与 DOMContentLoaded 大致相同的时刻触发 readystatechange 事件。但与此同时，图像及其他外部文件不一定可用。

注意：虽然使用 readystatechange 可以十分近似地模拟 DOMContentLoaded 事件，但它们本质上还是不同的。在不同页面中，load 事件与 readystatechange 事件并不能保证以相同的顺序触发。

```js
// 判断动态载入的 script、link 标签是否加载完成 demo
const script = document.createElement('script')
script.addEventListener('readystatechange', function eventListener(event) {
  if (event.readyState === 'loaded' || event.readyState === 'complete') { // hack 的手段，浏览器自身的问题
    script.removeEventListener('readystatechange', eventListener)
  }
})

script.src = 'example.js'
document.body.appendChild(script)
```

##  hashchange 事件
在 URL 的参数列表（及 URL 中“#”号后面的所有字符串）
发生变化时通知开发人员。之所以新增这个事件，是因为在 Ajax 应用中，开发人员经常要利用URL参数列表来保存状态或导航信息

必须要把 hashchange 事件处理程序添加给 window 对象，然后 URL 参数列表只要变化就会调用它。此时的 event 对象应该额外包含两个属性：oldURL 和 newURL。这两个属性分别保存着参数列表变化前后的完整 URL
