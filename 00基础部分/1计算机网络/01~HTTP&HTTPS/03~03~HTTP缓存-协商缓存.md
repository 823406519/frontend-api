## 协商缓存

1. Last-Modified   
  上一次请求时，服务器返回的字段，表示最后一次更新的时间。浏览器请求资源时发送`if-modified-since`字段，服务器用本地Last-modified时间与if-modified-since时间比较，如果本地Last-modified时间在If-Modified-Since设置的时间之后，则认为缓存已过期并返回新资源给浏览器；如果时间一致则发送304状态码，让浏览器继续使用缓存。

2. Etag。    
  为了解决文件修改时间不精确带来的问题，服务器和浏览器协商，返回文件的唯一标识ETag。下一次请求的时候将标识符放在`If-None-Match`中， 服务器检查该ETag，并判断出该页面自上次客户端请求之后是否被修改。

> 实际应用中由于Etag的计算是使用算法来得出的，而算法会占用服务端计算的资源，所有服务端的资源都是宝贵的，所以就很少使用Etag

> 请求头带上了if-modified-since和if-none-match两个字段，则先判断etag，再判断last-modified



