

## 完整的HTTP请求流程
1. 域名解释
2. TCP3次握手建立TCP连接
3. 发起HTTP请求
4. 服务器返回HTTP响应
5. 浏览器解析和渲染相关内容



## TCP/IP、Http、Socket的区别?
1. TCP/IP： 一般指TCP/IP协议栈、TCP/IP模型
2. Http是应用层协议
3. Tcp是传输层协议
4. Sokcet 是实现tcp、udp的点对点的通信基本要素,是一种实现或使用方法


## 反向代理（ Reverse Proxy ）
通过代理服务器来接收互联网上的连接请求，然后将请求转发给内部网络上的服务器，并把从服务器上得到的结果返回给互联网上,请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。


# 优化HTTP请求
1. 负载均衡优化
2. 利用HTTP缓存


负载均衡是指，将请求分发到多台应用服务器，以此来分散 压力的一种架构方式。

1. 重定向。请求全部发送到前置机，由前置机通过算法，分配给指定应用服务器。每一个的请求，都要重定向一下，所以效率不是很高
2. 反向代理。前置机使用反向代理的方式，将请求分发到应用服务器，客户端无需再请求一次。实现方式通常有两种，一种是用交换机实现，还有一种是用nginx这一类的软件实现。


## 协议扩展切换
设置upgrade 请求头，服务器能够了解客户端支持的通信协议（如WebSocket）

```shell
# 请求头部举例
connection: Upgrade;
upgrade: websocket;

# 如果服务器支持websocket，则允许客户端连接
# 在响应头部信息中返回
connection: Upgrade;
upgrade: websocket;

```


## HTTP 持久连接
持久连接指客户端和服务器的连接在一段时间内有效，当一个文件传输连接建立后，其他文件在保持连接时期，仍然能够复用这个连接。

HTTP 1.1 通过keep-alive 头部设置持久连接

HTTP 1.0 默认响应不反悔keep-alive头部，所以需要设置`connection: keep-alive`