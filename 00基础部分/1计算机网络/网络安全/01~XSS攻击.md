## XSS(Cross Site Scripting)
跨站脚本攻击。攻击者通过在目标网站上注入恶意脚本，浏览器无法分辨哪些脚本是可信的，导致恶意脚本在用户的浏览器上运行。

> 跨站脚本攻击（Cross-Site Scripting），为了和 CSS 区分，这里把攻击的第一个字母改成了 X，于是叫做 XSS。


## 分类
1. 存储型XSS，持久化，代码是存储在服务器中的
2. 反射型XSS： 非持久化，需要欺骗用户自己去点击链接才能触发XSS代码

* 恶意的脚本可以获取到 cookie（通常用来存储 session 的令牌）。如果攻击者可以获取到用户的会话 cookie 的话，他们就可以模仿用户登陆
* 脚本可以任意操控正在执行的脚本的页面的 DOM，允许攻击者插入看起来是真实网站的一部分的内容


## 常见攻击手段：
1. 网站添加一个看似安全链接，用户点击后，窃取cookie中的用户私密信息。
2. 网站添加一个表单，用户提交表单时，将表单数据发送到攻击者的服务器上。

## 防范
1. 对用户输入的特殊字符进行过滤，如`< > ; `等；对输入的长度进行限制
  * 客户端，使用 textContent 替代 innerHTML，阻止浏览器运行通过 HTML 解析器执行其中的脚本的字符串。服务端，转义 HTML 标签来阻止浏览器解析用户实际输入的 HTML，因此也不会执行脚本
  * 模板引擎和成熟的渲染框架都自带转义的功能
2. 对用户的输入进行encode
3. 避免在cookie中存放重要的用户隐私信息
4. 其他