
## 自定义指令
主要的重用和抽象的代码形式是组件，但是，有时候需要在普通元素上(plain element)进行低级DOM访问(low level dom access), 这时候使用自定义指令是很有用的。

```js
// Register a global custom directive
Vue.directive(name, {
    // ...
})

// register a directive locally, user directives optoins
directives: {
  
}
```

## 指令钩子函数
* bind: 只调用一次，当指令第一次绑定到元素上时。这是进行一次性设置的地方
* inserted: 绑定的指令被插入到父节点
* update:  called after the containing component’s VNode has updated, but possibly before its children have updated.
* componentUpdated: called after the containing component’s VNode and the VNodes of its children have updated
* unbind: 只调用一次，当指令从元素上解除时调用

## 指令钩子参数
1. el: 绑定的元素，可用来处理DOM
2. binding: 包含一系列属性的对象
    * name： 指令名称，没有v前缀
    * value： 传递给指令的值。`v-my-directive="1 + 1"` value 是 2
    * oldValue: 在`update | componentUpdated`中可以访问，指示前一个值
    * expression: `v-my-directive="1 + 1"` express 是 "1+1"
    * arg: 传递给指令的参数 `v-my-directive:foo`, 参数是foo
    * modifiers 修饰符对象，`v-my-directive.foo.bar`, 修饰符对象是`{ foo: true, bar: true }`

3. vnode: vue 编译器产生的虚拟节点
4. oldVnode： 上一个虚拟节点

```js
// ==== example
<div id="hook-arguments-example" v-demo:foo.a.b="message"></div>

// 定义
Vue.directive('demo', {
  bind: function (el, binding, vnode) {
    var s = JSON.stringify
    el.innerHTML =
      'name: '       + s(binding.name) + '<br>' +
      'value: '      + s(binding.value) + '<br>' +
      'expression: ' + s(binding.expression) + '<br>' +
      'argument: '   + s(binding.arg) + '<br>' +
      'modifiers: '  + s(binding.modifiers) + '<br>' +
      'vnode keys: ' + Object.keys(vnode).join(', ')
  }
})

new Vue({
  el: '#hook-arguments-example',
  data: {
    message: 'hello!'
  }
})
```

## 指令动态参数
```html
<!-- v-mydirective:[argument]="value" -->
<div id="dynamicexample">
  <h3>Scroll down inside this section ↓</h3>
  <p v-pin:[direction]="200">I am pinned onto the page at 200px to the left.</p>
</div>

Vue.directive('pin', {
  bind: function (el, binding, vnode) {
    el.style.position = 'fixed'
    var s = (binding.arg == 'left' ? 'left' : 'top')
    el.style[s] = binding.value + 'px'
  }
})

new Vue({
  el: '#dynamicexample',
  data: function () {
    return {
      direction: 'left'
    }
  }
})
```

## 指令钩子函数缩写
很多情况下，bind和update指令钩子具有相同的行为，而且不需要使用其他指令钩子

```html
Vue.directive('color-swatch', function (el, binding) {
  el.style.backgroundColor = binding.value
})
```